<mat-card>
  <mat-card-title>
    <h1>Tarjeta Acumulativa de Matrícula</h1>
  </mat-card-title>
  <mat-card-content [formGroup]="enrollForm">
    <mat-card>
      <mat-card-subtitle>
        <h2>Datos básicos</h2>
      </mat-card-subtitle>
      <mat-card-content>
        <div fxFlex fxFlexAlign="start">
          <div fxLayout="row wrap" fxLayout.xs="column wrap" fxLayoutGap="25px">
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Año Escolar</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="year"
                maxlength="4"
                required
                digitOnly
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Grado</mat-label>
              <mat-select formControlName="grade" required>
                <mat-option
                  *ngFor="let gradeType of filteredGradeTypes | async"
                  [value]="gradeType.id"
                >
                  {{ gradeType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Matricula</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="enrollmentNumber"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Folio</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="sheetNumber"
              />
            </mat-form-field>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>
        <h2>Información del Estudiante</h2>
      </mat-card-subtitle>
      <mat-card-content formGroupName="student">
        <div fxFlex fxFlexAlign="start">
          <div fxLayout="row wrap" fxLayout.xs="column wrap" fxLayoutGap="25px">
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="firstName"
                required
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="firstSurname"
                required
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Tipo Identificación</mat-label>
              <mat-select formControlName="identificationTypeId">
                <mat-option
                  *ngFor="
                    let identificationType of filteredIdentificationTypes
                      | async
                  "
                  [value]="identificationType.id"
                >
                  {{ identificationType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Identificación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="identification"
                required
              />
            </mat-form-field>
            <mat-form-field
              color="accent"
              fxFlex="calc(25% - 25px)"
              appearance="outline"
            >
              <mat-label>Fecha de Nacimiento</mat-label>
              <input
                matInput
                autocomplete="off"
                [matDatepicker]="picker"
                formControlName="birthDate"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker color="primary"></mat-datepicker>
            </mat-form-field>
            <enrollment-autocomplete
              fxFlex="calc(25% - 25px)"
              [data]="filteredStates"
              [placeholder]="'Lugar de Nacimiento'"
              (selectedValue)="selectedPlaceOfBirth($event)"
              [control]="placeOfBirthCtrl"
            ></enrollment-autocomplete>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Genero</mat-label>
              <mat-select formControlName="genderId" required>
                <mat-option
                  *ngFor="let genderType of filteredGenderTypes | async"
                  [value]="genderType.id"
                >
                  {{ genderType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Grupo Sanguíneo</mat-label>
              <mat-select formControlName="bloodGroupId">
                <mat-option
                  *ngFor="let bloodType of filteredBloodTypes | async"
                  [value]="bloodType.id"
                >
                  {{ bloodType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Sisben</mat-label>
              <mat-select formControlName="sisben">
                <mat-option [value]="true">Sí</mat-option>
                <mat-option [value]="false">No</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Seguro</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="healthPromotingCompany"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Dirección</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="address"
                required
              />
            </mat-form-field>
            <enrollment-autocomplete
              fxFlex="calc(25% - 25px)"
              [data]="filteredNeighborhood"
              [placeholder]="'Barrio'"
              (selectedValue)="selectedNeighborhood($event, 'student')"
              [control]="neighborhoodCtrl"
            >
            </enrollment-autocomplete>
            <mat-form-field fxFlex="calc(12.5% - 25px)" appearance="outline">
              <mat-label>Estrato</mat-label>
              <input
                matInput
                autocomplete="off"
                maxlength="1"
                placeholder=""
                formControlName="stratum"
                digitOnly
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(12.5% - 25px)" appearance="outline">
              <mat-label>Telefono</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="phone"
                required
                digitOnly
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Institución de Procedencia</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="institutionProcedenica"
              />
            </mat-form-field>
            <div fxFlex="calc(25% - 25px)" style="padding-top: 15px;">
              <mat-checkbox color="primary" formControlName="displaced"
                >Desplazado?</mat-checkbox
              >
            </div>
            <div></div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <h2>Información del Padre</h2>
          <mat-slide-toggle
            color="primary"
            style="margin-right: 25px;"
            [formControl]="fatherLegalGuardian"
          >
            Acudiente
          </mat-slide-toggle>
        </div>
      </mat-card-subtitle>
      <mat-card-content formGroupName="father">
        <div fxFlex fxFlexAlign="start">
          <div fxLayout="row wrap" fxLayout.xs="column wrap" fxLayoutGap="25px">
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Tipo Identificación</mat-label>
              <mat-select formControlName="identificationTypeId">
                <mat-option
                  *ngFor="
                    let identificationType of filteredIdentificationTypes
                      | async
                  "
                  [value]="identificationType.id"
                >
                  {{ identificationType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Identificación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="identification"
                required
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Ocupación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="occupation"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Dirección</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="address"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="copyAddress('father')"
                matTooltip="Copiar dirección del estudiante"
              >
                <mat-icon>content_copy</mat-icon>
              </button>
            </mat-form-field>
            <enrollment-autocomplete
              fxFlex="calc(25% - 25px)"
              [data]="filteredNeighborhoodFather"
              [placeholder]="'Barrio'"
              (selectedValue)="selectedNeighborhood($event, 'father')"
              [control]="neighborhoodCtrlFather"
            ></enrollment-autocomplete>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Telefono</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="phone"
                required
                digitOnly
              />
            </mat-form-field>
            <div></div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <h2>Información de la Madre</h2>
          <mat-slide-toggle
            color="primary"
            style="margin-right: 25px;"
            [formControl]="motherLegalGuardian"
          >
            Acudiente
          </mat-slide-toggle>
        </div>
      </mat-card-subtitle>
      <mat-card-content formGroupName="mother">
        <div fxFlex fxFlexAlign="start">
          <div fxLayout="row wrap" fxLayout.xs="column wrap" fxLayoutGap="25px">
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Tipo Identificación</mat-label>
              <mat-select formControlName="identificationTypeId">
                <mat-option
                  *ngFor="
                    let identificationType of filteredIdentificationTypes
                      | async
                  "
                  [value]="identificationType.id"
                >
                  {{ identificationType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Identificación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="identification"
                required
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Ocupación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="occupation"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Dirección</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="address"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="copyAddress('mother')"
                matTooltip="Copiar dirección del estudiante"
              >
                <mat-icon>content_copy</mat-icon>
              </button>
            </mat-form-field>
            <enrollment-autocomplete
              fxFlex="calc(25% - 25px)"
              [data]="filteredNeighborhoodMother"
              [placeholder]="'Barrio'"
              (selectedValue)="selectedNeighborhood($event, 'mother')"
              [control]="neighborhoodCtrlMother"
            ></enrollment-autocomplete>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Telefono</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="phone"
                required
                digitOnly
              />
            </mat-form-field>
            <div></div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card *ngIf="showOtherLegalGuardian">
      <mat-card-subtitle>
        <h2>Información del Acudiente</h2>
      </mat-card-subtitle>
      <mat-card-content formGroupName="legalGuardian">
        <div fxFlex fxFlexAlign="start">
          <div fxLayout="row wrap" fxLayout.xs="column wrap" fxLayoutGap="25px">
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Nombre</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondName"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Primer Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="firstSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Segundo Apellido</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="secondSurname"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Tipo Identificación</mat-label>
              <mat-select formControlName="identificationTypeId">
                <mat-option
                  *ngFor="
                    let identificationType of filteredIdentificationTypes
                      | async
                  "
                  [value]="identificationType.id"
                >
                  {{ identificationType.description }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Número de Identificación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="identification"
                required
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Ocupación</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="occupation"
              />
            </mat-form-field>
            <mat-form-field fxFlex="calc(50% - 25px)" appearance="outline">
              <mat-label>Dirección</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                required
                formControlName="address"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="copyAddress('legalGuardian')"
                matTooltip="Copiar dirección del estudiante"
              >
                <mat-icon>content_copy</mat-icon>
              </button>
            </mat-form-field>
            <enrollment-autocomplete
              fxFlex="calc(25% - 25px)"
              [data]="filteredNeighborhoodLegalGuardian"
              [placeholder]="'Barrio'"
              (selectedValue)="selectedNeighborhood($event, 'legalGuardian')"
              [control]="neighborhoodCtrlLegalGuardian"
            ></enrollment-autocomplete>
            <mat-form-field fxFlex="calc(25% - 25px)" appearance="outline">
              <mat-label>Telefono</mat-label>
              <input
                matInput
                autocomplete="off"
                placeholder=""
                formControlName="phone"
                required
                digitOnly
              />
            </mat-form-field>
            <div></div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-flat-button color="warn">Cancelar</button>
    <button
      mat-flat-button
      color="primary"
      [disabled]="enrollForm.invalid"
      (click)="enroll()"
    >
      Matricular
    </button>
  </mat-card-actions>
</mat-card>
